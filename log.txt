#1 [internal] load local bake definitions
#1 reading from stdin 1.58kB done
#1 DONE 0.0s

#2 [test_auth internal] load build definition from Dockerfile.auth
#2 transferring dockerfile: 191B 0.0s done
#2 DONE 0.1s

#3 [test_content internal] load build definition from Dockerfile.content
#3 transferring dockerfile: 203B done
#3 DONE 0.1s

#4 [test_authorization internal] load build definition from Dockerfile.authorization
#4 transferring dockerfile: 227B done
#4 DONE 0.1s

#5 [test_authorization internal] load metadata for docker.io/library/python:3.11-slim
#5 DONE 1.1s

#6 [test_content internal] load .dockerignore
#6 transferring context: 2B done
#6 DONE 0.0s

#7 [test_auth internal] load build context
#7 transferring context: 1.90kB done
#7 DONE 0.0s

#8 [test_content internal] load build context
#8 transferring context: 2.53kB done
#8 DONE 0.0s

#9 [test_authorization internal] load build context
#9 transferring context: 2.30kB done
#9 DONE 0.0s

#10 [test_content 1/4] FROM docker.io/library/python:3.11-slim@sha256:5be45dbade29bebd6886af6b438fd7e0b4eb7b611f39ba62b430263f82de36d2
#10 resolve docker.io/library/python:3.11-slim@sha256:5be45dbade29bebd6886af6b438fd7e0b4eb7b611f39ba62b430263f82de36d2 0.0s done
#10 sha256:3e731abb5c1dd05aef62585d392d31ad26089dc4c031730e5ab0225aef80b3f2 0B / 14.36MB 0.1s
#10 sha256:5be45dbade29bebd6886af6b438fd7e0b4eb7b611f39ba62b430263f82de36d2 10.37kB / 10.37kB done
#10 sha256:89abad2fb0c3633705054018ae09caae4bd0e0febf57fb57a96fd41769c94e12 1.75kB / 1.75kB done
#10 sha256:fa659464a114c340e31c7b7954a1aa679de7e7f5346e4b5804e8422b2596aff9 5.47kB / 5.47kB done
#10 sha256:119d43eec815e5f9a47da3a7d59454581b1e204b0c34db86f171b7ceb3336533 0B / 29.77MB 0.1s
#10 sha256:5b09819094bb89d5b2416ff2fb03f68666a5372c358cfd22f2b62d7f6660d906 0B / 1.29MB 0.1s
#10 sha256:5be45dbade29bebd6886af6b438fd7e0b4eb7b611f39ba62b430263f82de36d2 10.37kB / 10.37kB done
#10 sha256:89abad2fb0c3633705054018ae09caae4bd0e0febf57fb57a96fd41769c94e12 1.75kB / 1.75kB done
#10 sha256:fa659464a114c340e31c7b7954a1aa679de7e7f5346e4b5804e8422b2596aff9 5.47kB / 5.47kB done
#10 sha256:3e731abb5c1dd05aef62585d392d31ad26089dc4c031730e5ab0225aef80b3f2 4.19MB / 14.36MB 0.3s
#10 sha256:3e731abb5c1dd05aef62585d392d31ad26089dc4c031730e5ab0225aef80b3f2 14.36MB / 14.36MB 0.4s
#10 sha256:119d43eec815e5f9a47da3a7d59454581b1e204b0c34db86f171b7ceb3336533 5.24MB / 29.77MB 0.4s
#10 sha256:3e731abb5c1dd05aef62585d392d31ad26089dc4c031730e5ab0225aef80b3f2 14.36MB / 14.36MB 0.4s done
#10 sha256:119d43eec815e5f9a47da3a7d59454581b1e204b0c34db86f171b7ceb3336533 19.92MB / 29.77MB 0.6s
#10 sha256:5b09819094bb89d5b2416ff2fb03f68666a5372c358cfd22f2b62d7f6660d906 1.29MB / 1.29MB 0.4s done
#10 sha256:0b2bf04f68e9f306a8a83f57c6ced322a23968bf3d5acebc07e055c090240826 0B / 250B 0.6s
#10 sha256:119d43eec815e5f9a47da3a7d59454581b1e204b0c34db86f171b7ceb3336533 28.31MB / 29.77MB 0.7s
#10 sha256:0b2bf04f68e9f306a8a83f57c6ced322a23968bf3d5acebc07e055c090240826 250B / 250B 0.6s done
#10 sha256:119d43eec815e5f9a47da3a7d59454581b1e204b0c34db86f171b7ceb3336533 29.77MB / 29.77MB 0.7s done
#10 sha256:0b2bf04f68e9f306a8a83f57c6ced322a23968bf3d5acebc07e055c090240826 250B / 250B 0.6s done
#10 extracting sha256:119d43eec815e5f9a47da3a7d59454581b1e204b0c34db86f171b7ceb3336533
#10 extracting sha256:119d43eec815e5f9a47da3a7d59454581b1e204b0c34db86f171b7ceb3336533 2.1s done
#10 extracting sha256:119d43eec815e5f9a47da3a7d59454581b1e204b0c34db86f171b7ceb3336533 2.1s done
#10 extracting sha256:5b09819094bb89d5b2416ff2fb03f68666a5372c358cfd22f2b62d7f6660d906 0.1s
#10 extracting sha256:5b09819094bb89d5b2416ff2fb03f68666a5372c358cfd22f2b62d7f6660d906 0.2s done
#10 extracting sha256:3e731abb5c1dd05aef62585d392d31ad26089dc4c031730e5ab0225aef80b3f2 0.1s
#10 extracting sha256:3e731abb5c1dd05aef62585d392d31ad26089dc4c031730e5ab0225aef80b3f2 1.5s done
#10 extracting sha256:0b2bf04f68e9f306a8a83f57c6ced322a23968bf3d5acebc07e055c090240826
#10 extracting sha256:0b2bf04f68e9f306a8a83f57c6ced322a23968bf3d5acebc07e055c090240826 done
#10 DONE 5.0s

#11 [test_authorization 2/4] WORKDIR /app
#11 DONE 1.2s

#12 [test_content 3/4] RUN pip install --no-cache-dir requests
#12 4.224 Collecting requests
#12 4.257   Downloading requests-2.32.5-py3-none-any.whl.metadata (4.9 kB)
#12 4.511 Collecting charset_normalizer<4,>=2 (from requests)
#12 4.518   Downloading charset_normalizer-3.4.4-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl.metadata (37 kB)
#12 4.570 Collecting idna<4,>=2.5 (from requests)
#12 4.575   Downloading idna-3.11-py3-none-any.whl.metadata (8.4 kB)
#12 4.691 Collecting urllib3<3,>=1.21.1 (from requests)
#12 4.696   Downloading urllib3-2.6.3-py3-none-any.whl.metadata (6.9 kB)
#12 4.749 Collecting certifi>=2017.4.17 (from requests)
#12 4.754   Downloading certifi-2026.1.4-py3-none-any.whl.metadata (2.5 kB)
#12 4.787 Downloading requests-2.32.5-py3-none-any.whl (64 kB)
#12 4.794    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 64.7/64.7 kB 42.3 MB/s eta 0:00:00
#12 4.799 Downloading certifi-2026.1.4-py3-none-any.whl (152 kB)
#12 4.809    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 152.9/152.9 kB 75.1 MB/s eta 0:00:00
#12 4.815 Downloading charset_normalizer-3.4.4-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl (151 kB)
#12 4.821    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 151.6/151.6 kB 142.5 MB/s eta 0:00:00
#12 4.828 Downloading idna-3.11-py3-none-any.whl (71 kB)
#12 4.833    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 71.0/71.0 kB 102.0 MB/s eta 0:00:00
#12 4.841 Downloading urllib3-2.6.3-py3-none-any.whl (131 kB)
#12 4.846    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 131.6/131.6 kB 97.3 MB/s eta 0:00:00
#12 4.994 Installing collected packages: urllib3, idna, charset_normalizer, certifi, requests
#12 5.659 Successfully installed certifi-2026.1.4 charset_normalizer-3.4.4 idna-3.11 requests-2.32.5 urllib3-2.6.3
#12 5.661 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#12 5.839 
#12 5.839 [notice] A new release of pip is available: 24.0 -> 25.3
#12 5.839 [notice] To update, run: pip install --upgrade pip
#12 DONE 6.2s

#13 [test_content 4/4] COPY content_test.py /app/content_test.py
#13 DONE 0.1s

#14 [test_authorization 4/4] COPY authorization_test.py /app/authorization_test.py
#14 DONE 0.1s

#15 [test_auth 4/4] COPY auth_test.py /app/auth_test.py
#15 DONE 0.1s

#16 [test_authorization] exporting to image
#16 exporting layers
#16 exporting layers 0.3s done
#16 writing image sha256:d7aa0341c579760e21c95085a11295cae4543e8afc087a3647bc41555b938d12 done
#16 naming to docker.io/library/fastapi_ci_cd_exam-test_authorization done
#16 DONE 0.4s

#17 [test_content] exporting to image
#17 exporting layers 0.3s done
#17 writing image sha256:a29976b9a32a3023b548d89221f2b0f81d214ebd36f87fb6c79b5aa9e671d330 0.0s done
#17 naming to docker.io/library/fastapi_ci_cd_exam-test_content 0.0s done
#17 DONE 0.3s

#18 [test_auth] exporting to image
#18 exporting layers 0.3s done
#18 writing image sha256:ce4a5add3d770a9e720a3bf5c2bb3edd77d811dd1709c872c313b750d8f06b7b 0.0s done
#18 naming to docker.io/library/fastapi_ci_cd_exam-test_auth 0.0s done
#18 DONE 0.4s

#19 [test_content] resolving provenance for metadata file
#19 DONE 0.1s

#20 [test_authorization] resolving provenance for metadata file
#20 DONE 0.0s

#21 [test_auth] resolving provenance for metadata file
#21 DONE 0.0s
Attaching to api, test_auth, test_authorization, test_content
api  | INFO:     172.18.0.3:41334 - "GET /status HTTP/1.1" 200 OK
api  | INFO:     172.18.0.3:41346 - "GET /permissions?username=alice&password=wonderland HTTP/1.1" 200 OK
api  | INFO:     172.18.0.3:41358 - "GET /permissions?username=bob&password=builder HTTP/1.1" 200 OK
api  | INFO:     172.18.0.3:41368 - "GET /permissions?username=clementine&password=mandarine HTTP/1.1" 403 Forbidden
test_auth  | 
test_auth  | ============================
test_auth  |     Authentication test
test_auth  | ============================
test_auth  | 
test_auth  | request done at "/permissions"
test_auth  | | username="alice"
test_auth  | | password="wonderland"
test_auth  | 
test_auth  | Expected result = 200;
test_auth  | actual result = 200
test_auth  | 
test_auth  | ==>  SUCCESS
test_auth  | 
test_auth  | 
test_auth  | 
test_auth  | ============================
test_auth  |     Authentication test
test_auth  | ============================
test_auth  | 
test_auth  | request done at "/permissions"
test_auth  | | username="bob"
test_auth  | | password="builder"
test_auth  | 
test_auth  | Expected result = 200;
test_auth  | actual result = 200
test_auth  | 
test_auth  | ==>  SUCCESS
test_auth  | 
test_auth  | 
test_auth  | 
test_auth  | ============================
test_auth  |     Authentication test
test_auth  | ============================
test_auth  | 
test_auth  | request done at "/permissions"
test_auth  | | username="clementine"
test_auth  | | password="mandarine"
test_auth  | 
test_auth  | Expected result = 403;
test_auth  | actual result = 403
test_auth  | 
test_auth  | ==>  SUCCESS
test_auth  | 
test_auth  | 
[Ktest_auth exited with code 0
[K Container test_content  [32mStopping[0m
[K Container test_content  [32mStopped[0m
[K Container test_authorization  [32mStopping[0m
api        | INFO:     172.18.0.3:41376 - "GET /status HTTP/1.1" 200 OK
api        | INFO:     172.18.0.3:41392 - "GET /v1/sentiment?username=bob&password=builder&sentence=life+is+beautiful HTTP/1.1" 200 OK
api        | INFO:     172.18.0.3:41396 - "GET /v2/sentiment?username=bob&password=builder&sentence=life+is+beautiful HTTP/1.1" 403 Forbidden
api        | INFO:     172.18.0.3:41402 - "GET /v1/sentiment?username=alice&password=wonderland&sentence=life+is+beautiful HTTP/1.1" 200 OK
api        | INFO:     172.18.0.3:41406 - "GET /v2/sentiment?username=alice&password=wonderland&sentence=life+is+beautiful HTTP/1.1" 200 OK
test_authorization  | 
test_authorization  | ============================
test_authorization  |     Authorization test
test_authorization  | ============================
test_authorization  | 
test_authorization  | request done at "/v1/sentiment"
test_authorization  | | username="bob"
test_authorization  | | password="builder"
test_authorization  | | sentence="life is beautiful"
test_authorization  | 
test_authorization  | Expected result = 200;
test_authorization  | actual result = 200
test_authorization  | 
test_authorization  | ==>  SUCCESS
test_authorization  | 
test_authorization  | 
test_authorization  | 
test_authorization  | ============================
test_authorization  |     Authorization test
test_authorization  | ============================
test_authorization  | 
test_authorization  | request done at "/v2/sentiment"
test_authorization  | | username="bob"
test_authorization  | | password="builder"
test_authorization  | | sentence="life is beautiful"
test_authorization  | 
test_authorization  | Expected result = 403;
test_authorization  | actual result = 403
test_authorization  | 
test_authorization  | ==>  SUCCESS
test_authorization  | 
test_authorization  | 
test_authorization  | 
test_authorization  | ============================
test_authorization  |     Authorization test
test_authorization  | ============================
test_authorization  | 
test_authorization  | request done at "/v1/sentiment"
test_authorization  | | username="alice"
test_authorization  | | password="wonderland"
test_authorization  | | sentence="life is beautiful"
test_authorization  | 
test_authorization  | Expected result = 200;
test_authorization  | actual result = 200
test_authorization  | 
test_authorization  | ==>  SUCCESS
test_authorization  | 
test_authorization  | 
test_authorization  | 
test_authorization  | ============================
test_authorization  |     Authorization test
test_authorization  | ============================
test_authorization  | 
test_authorization  | request done at "/v2/sentiment"
test_authorization  | | username="alice"
test_authorization  | | password="wonderland"
test_authorization  | | sentence="life is beautiful"
test_authorization  | 
test_authorization  | Expected result = 200;
test_authorization  | actual result = 200
test_authorization  | 
test_authorization  | ==>  SUCCESS
test_authorization  | 
test_authorization  | 
[K Container test_authorization  [32mStopped[0m
[K Container test_auth  [32mStopping[0m
[K Container test_auth  [32mStopped[0m
[K Container api  [32mStopping[0m
[Ktest_authorization exited with code 0
api                 | INFO:     172.18.0.3:41408 - "GET /status HTTP/1.1" 200 OK
api                 | INFO:     172.18.0.3:41414 - "GET /v1/sentiment?username=alice&password=wonderland&sentence=life+is+beautiful HTTP/1.1" 200 OK
api                 | INFO:     172.18.0.3:41424 - "GET /v1/sentiment?username=alice&password=wonderland&sentence=that+sucks HTTP/1.1" 200 OK
api                 | INFO:     172.18.0.3:41430 - "GET /v2/sentiment?username=alice&password=wonderland&sentence=life+is+beautiful HTTP/1.1" 200 OK
api                 | INFO:     172.18.0.3:41432 - "GET /v2/sentiment?username=alice&password=wonderland&sentence=that+sucks HTTP/1.1" 200 OK
test_content        | 
test_content        | ============================
test_content        |     Content test
test_content        | ============================
test_content        | 
test_content        | request done at "/v1/sentiment"
test_content        | | username="alice"
test_content        | | password="wonderland"
test_content        | | sentence="life is beautiful"
test_content        | 
test_content        | Expected result = 200 and score positive;
test_content        | actual result = 200 and score = 0.5994
test_content        | 
test_content        | ==>  SUCCESS
test_content        | 
test_content        | 
test_content        | 
test_content        | ============================
test_content        |     Content test
test_content        | ============================
test_content        | 
test_content        | request done at "/v1/sentiment"
test_content        | | username="alice"
test_content        | | password="wonderland"
test_content        | | sentence="that sucks"
test_content        | 
test_content        | Expected result = 200 and score negative;
test_content        | actual result = 200 and score = -0.3612
test_content        | 
test_content        | ==>  SUCCESS
test_content        | 
test_content        | 
test_content        | 
test_content        | ============================
test_content        |     Content test
test_content        | ============================
test_content        | 
test_content        | request done at "/v2/sentiment"
test_content        | | username="alice"
test_content        | | password="wonderland"
test_content        | | sentence="life is beautiful"
test_content        | 
test_content        | Expected result = 200 and score positive;
test_content        | actual result = 200 and score = 0.5994
test_content        | 
test_content        | ==>  SUCCESS
test_content        | 
test_content        | 
test_content        | 
test_content        | ============================
test_content        |     Content test
test_content        | ============================
test_content        | 
test_content        | request done at "/v2/sentiment"
test_content        | | username="alice"
test_content        | | password="wonderland"
test_content        | | sentence="that sucks"
test_content        | 
test_content        | Expected result = 200 and score negative;
test_content        | actual result = 200 and score = -0.3612
test_content        | 
test_content        | ==>  SUCCESS
test_content        | 
test_content        | 
[Ktest_content exited with code 0
[K Container api  [32mStopped[0m
